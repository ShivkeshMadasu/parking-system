import React, { useEffect } from 'react';
import { Loader } from '@googlemaps/js-api-loader';
import { Box } from '@mui/material';

const useStyles = {
    mapStyles: {
        width: "100%", 
        height: "550px",
        borderRadius: "20px"
    }
}

declare global {
    interface Window {
        google: any;
    }
}

interface IParkingLotMap {
    locationDetails: any;
    setLocationDetails: (val: any) => void;
}

const ParkingLotMap: React.FC<IParkingLotMap> = ({locationDetails, setLocationDetails}) => {

    useEffect(() => {
        const loader = new Loader({
            apiKey: 'AIzaSyCDOKhVpr0TkHSbzVMU2r2JIG6KdZTGkTg',
        });

        loader
        .importLibrary('maps')
        .then(({Map}) => {
            initMap(Map);
        });
    }, []);

    const initMap = (Map: typeof google.maps.Map) => {
        const map = new Map(document.getElementById("google-map")!, {
            center: { lat: 33.30898917179678, lng: -111.67290639333699 },
            zoom: 10,
            mapTypeId: window.google.maps.MapTypeId.ROADMAP
        });

        const directions = new window.google.maps.DirectionsService();

        const renderer = new window.google.maps.DirectionsRenderer({
            map: map,
            panel: document.getElementById('directions-panel')
        });

        const lineCoordinates = [
            [
            { lat: 33.308639057073734, lng: -111.67237008832493 },
            { lat: 33.30910671489029, lng: -111.67236209425023 },
            { lat: 33.3091061169168, lng: -111.67272728498723 },
            { lat: 33.309333636578835, lng: -111.67272728498672 },
            { lat: 33.30934036128903, lng: -111.6729874592612 },
            { lat: 33.30938070953797, lng: -111.67298611815662 },
            { lat: 33.30938, lng: -111.67336 },
            { lat: 33.30933, lng: -111.67336 },
            { lat: 33.30934098739088, lng: -111.67350852699946 },
            { lat: 33.30874970560407, lng: -111.67351853665872 },
            { lat: 33.30870263230671, lng: -111.67352255998867 },
            { lat: 33.308697028341314, lng: -111.67287078318411 },
            { lat: 33.308607364834764, lng: -111.67286407766883 },
            { lat: 33.30857149940743, lng: -111.67283189115884 },
            { lat: 33.30855692907336, lng: -111.67280641017177 },
            { lat: 33.30854460032724, lng: -111.6727514248839 },
            { lat: 33.30854123794164, lng: -111.67249259170914 },
            { lat: 33.30853227157938, lng: -111.67239603217921 },
            ],
            [
                { lat: 33.309227044804764, lng: -111.67337548985411 },
                { lat: 33.30922488614691, lng: -111.67333157893772 },
                { lat: 33.308861151527054, lng: -111.67333416193254 },
                { lat: 33.30886007219362, lng: -111.67338194734155 }
            ],
            [
                { lat: 33.30925186936605, lng: -111.6732618380702 },
                { lat: 33.30925510735183, lng: -111.67331349797183 },
                { lat: 33.3088336292356, lng: -111.67331925925093 },
                { lat: 33.308837552006935, lng: -111.67327097947233 }
            ],
            [
                { lat: 33.30925336477373, lng: -111.67317844323006 },
                { lat: 33.30925000241432, lng: -111.67313217510889 },
                { lat: 33.30883643121476, lng: -111.67313686897636 },
                { lat: 33.30883250844337, lng: -111.67319386593721 }
            ],
            [
                { lat: 33.308833629235224, lng: -111.67307450759566 },
                { lat: 33.30883475002704, lng: -111.67312077571682 },
                { lat: 33.30925056280658, lng: -111.67311675240158 },
                { lat: 33.309252243986286, lng: -111.67307115483291 }
            ],
            [
                { lat: 33.30925048179195, lng: -111.67298206665244 },
                { lat: 33.309248863937164, lng: -111.67293657336847 },
                { lat: 33.3088338831832, lng: -111.67294141307946 },
                { lat: 33.3088338831832, lng: -111.67298787430563 }
            ],
            [
                { lat: 33.30922540503876, lng: -111.67287268918197 },
                { lat: 33.30922297825584, lng: -111.67292011835033 },
                { lat: 33.30883307425227, lng: -111.6729249580615 },
                { lat: 33.30883145638972, lng: -111.67288043271977 }
            ],
            [
                { lat: 33.3089722103186, lng: -111.67278847821161 },
                { lat: 33.30897059245863, lng: -111.67274395286988 },
                { lat: 33.308654300258546, lng: -111.67274588875432 },
                { lat: 33.30865268239267, lng: -111.67278944615384 }
            ],
            [
                { lat: 33.30897140138861, lng: -111.67268200456836 },
                { lat: 33.30896978352864, lng: -111.67272846579452 },
                { lat: 33.30862760546701, lng: -111.67272943373672 },
                { lat: 33.308626796533815, lng: -111.67268684427941 }
            ],
            [
                { lat: 33.30896978352978, lng: -111.67259392182682 },
                { lat: 33.30896735673977, lng: -111.67254939648508 },
                { lat: 33.30872063273226, lng: -111.67255133236948 },
                { lat: 33.30872144166457, lng: -111.67259585771122 }
            ],
            [
                { lat: 33.308719823801205, lng: -111.67248841612694 },
                { lat: 33.30872063273351, lng: -111.67253390941087 },
                { lat: 33.308968974598976, lng: -111.67253100558425 },
                { lat: 33.308968165668965, lng: -111.67248841612694 }
            ],
            [
                { lat: 33.30938152793713, lng: -111.67301884845546 },
                { lat: 33.309334610206136, lng: -111.67301788051326 }
            ],
            [
                { lat: 33.309380719010925, lng: -111.67304788672182 },
                { lat: 33.30933622805934, lng: -111.67304788672182 }
            ],
            [
                { lat: 33.309379101158534, lng: -111.67307595704595 },
                { lat: 33.309337036985944, lng: -111.67307789293037 }
            ],
            [
                { lat: 33.30938314578947, lng: -111.67310693119673 },
                { lat: 33.30933784591252, lng: -111.67310789913894 }
            ],
            [
                { lat: 33.309380719010925, lng: -111.67313596946306 },
                { lat: 33.30933784591252, lng: -111.67313596946306 }
            ],
            [
                { lat: 33.30937829223234, lng: -111.67321921249325 },
                { lat: 33.309337036985944, lng: -111.67321727660884 }
            ],
            [
                { lat: 33.30938152793713, lng: -111.67324825075961 },
                { lat: 33.30933784591252, lng: -111.67324825075961 }
            ],
            [
                { lat: 33.309380719010925, lng: -111.67327728902596 },
                { lat: 33.309338654839124, lng: -111.67327728902596 }
            ],
            [
                { lat: 33.309380719010925, lng: -111.6733063272923 },
                { lat: 33.30933784591252, lng: -111.6733063272923 }
            ],
            [
                { lat: 33.30938152793713, lng: -111.67333536555866 },
                { lat: 33.309337036985944, lng: -111.67333536555866 }
            ],
            [
                { lat: 33.30920288163478, lng: -111.67338041401597 },
                { lat: 33.309202321241436, lng: -111.67333012259654 }
            ],
            [
                { lat: 33.30917766392997, lng: -111.67338041401597 },
                { lat: 33.309178224323475, lng: -111.67333012259654 }
            ],
            [
                { lat: 33.30915300661153, lng: -111.67338041401597 },
                { lat: 33.30915300661153, lng: -111.6733321342533 }
            ],
            [
                { lat: 33.3091283492861, lng: -111.67338041401597 },
                { lat: 33.309128909679934, lng: -111.67333079314879 }
            ],
            [
                { lat: 33.309103691953744, lng: -111.6733321342533 },
                { lat: 33.30910313155973, lng: -111.67338041401597 }
            ],
            [
                { lat: 33.309079049484914, lng: -111.67333217950554 },
                { lat: 33.309080170273226, lng: -111.67337911816368 }
            ],
            [
                { lat: 33.309031976361915, lng: -111.67333352061007 },
                { lat: 33.30903309715084, lng: -111.67337978871596 }
            ],
            [
                { lat: 33.30901004565871, lng: -111.67333343362014 },
                { lat: 33.309011306611986, lng: -111.67338247029868 }
            ],
            [
                { lat: 33.30898419611263, lng: -111.67333343362014 },
                { lat: 33.30898608754309, lng: -111.67338247029868 }
            ],
            [
                { lat: 33.30896086846689, lng: -111.67333343362014 },
                { lat: 33.30896090648956, lng: -111.6733827286636 }
            ],
            [
                { lat: 33.30893456792256, lng: -111.6733344489009 },
                { lat: 33.30893512831765, lng: -111.67338339921581 }
            ],
            [
                { lat: 33.30891103132585, lng: -111.6733344489009 },
                { lat: 33.30891159172109, lng: -111.6733820581113 }
            ],
            
            [
                { lat: 33.308886373932026, lng: -111.67333511945316 },
                { lat: 33.30888693432742, lng: -111.67338406976808 }
            ],
            [
                { lat: 33.309227093670835, lng: -111.67331232067698 },
                { lat: 33.30922653327763, lng: -111.67326404091432 }
            ],
            [
                { lat: 33.3092035571531, lng: -111.67326337036206 },
                { lat: 33.30920299676046, lng: -111.67331299122904 }
            ],
            [
                { lat: 33.30917833944846, lng: -111.67331366178149 },
                { lat: 33.309176658268626, lng: -111.67326471146637 }
            ],
            [
                { lat: 33.30915312173654, lng: -111.67331299122924 },
                { lat: 33.30915312173654, lng: -111.67326538201885 }
            ],
            [
                { lat: 33.30912846441116, lng: -111.67331366178149 },
                { lat: 33.30912846441116, lng: -111.67326337036206 }
            ],
            [
                { lat: 33.309103807078806, lng: -111.67331433233375 },
                { lat: 33.30910324668482, lng: -111.67326404091432 }
            ],
            [
                { lat: 33.30908027052678, lng: -111.67331366178148 },
                { lat: 33.30907971013261, lng: -111.6732626998098 }
            ],
            [
                { lat: 33.30900966083414, lng: -111.67331500288599 },
                { lat: 33.309008540044914, lng: -111.67326605257107}
            ],
            [
                { lat: 33.30898444307342, lng: -111.67331567343824 },
                { lat: 33.30898500346817, lng: -111.67326605257107 }
            ],
            [
                { lat: 33.30895978570035, lng: -111.67331500288599 },
                { lat: 33.30896034609526, lng: -111.67326672312332 }
            ],
            [
                { lat: 33.30893568871538, lng: -111.67331634399049 },
                { lat: 33.30893568871538, lng: -111.67326672312332 }
            ],
            [
                { lat: 33.30891103132852, lng: -111.67326806422786 },
                { lat: 33.30890935014279, lng: -111.67331768509501 }
            ],
            [
                { lat: 33.30888581353824, lng: -111.6733163439904 },
                { lat: 33.30888693432902, lng: -111.67326739367547 }
            ],
            [
                { lat: 33.30886115613726, lng: -111.67331701454265 },
                { lat: 33.30886227692837, lng: -111.67326940533226 }
            ],
            [
                { lat: 33.30922597288764, lng: -111.67313261267277 },
                { lat: 33.309226533280835, lng: -111.67318223353996 }
            ],
            [
                { lat: 33.309200194796105, lng: -111.67313328322504 },
                { lat: 33.30920075518949, lng: -111.67318223353996 }
            ],
            [
                { lat: 33.30917665827112, lng: -111.67313328322504 },
                { lat: 33.30917665827112, lng: -111.67318357464447 }
            ],
            [
                { lat: 33.30915200095238, lng: -111.67313462432955 },
                { lat: 33.30915200095238, lng: -111.67318357464447 }
            ],
            [
                { lat: 33.30912622283899, lng: -111.67313328322504 },
                { lat: 33.309126783232855, lng: -111.67318223353996 }
            ],
            [
                { lat: 33.30910100511201, lng: -111.67313462432955 },
                { lat: 33.30910268629403, lng: -111.67318491574899 }
            ],
            [
                { lat: 33.30907802895224, lng: -111.67313529488175 },
                { lat: 33.30907746855807, lng: -111.6731835746444 }
            ],
            [
                { lat: 33.30886115613726, lng: -111.67331701454265 },
                { lat: 33.30886227692837, lng: -111.67326940533226 }
            ],
            [
                { lat: 33.309008540048474, lng: -111.67313596543401 },
                { lat: 33.30900910044308, lng: -111.67318625685344 }
            ],
            [
                { lat: 33.308983882682206, lng: -111.67313663598627 },
                { lat: 33.30898444307698, lng: -111.67318625685344 }
            ],
            [
                { lat: 33.30895922530899, lng: -111.67313663598627 },
                { lat: 33.30896034609882, lng: -111.67318625685344 }
            ],
            [
                { lat: 33.30891048031592, lng: -111.67313600168933 },
                { lat: 33.30891048031592, lng: -111.67318733936415 }
            ],
            [
                { lat: 33.30888498661827, lng: -111.67313897778641 },
                { lat: 33.30888498661827, lng: -111.67318733936415 }
            ],
            [
                { lat: 33.30886073650867, lng: -111.67313972181067 },
                { lat: 33.30885762751977, lng: -111.67319180350978 }
            ],
            [
                { lat: 33.308934108614416, lng: -111.67313674571359 },
                { lat: 33.30893597400615, lng: -111.67318659533989 }
            ],
            [
                { lat: 33.309224948377384, lng: -111.67306751032486 },
                { lat: 33.309225508770616, lng: -111.67311444898299 }
            ],
            [
                { lat: 33.30920085146571, lng: -111.6730668397726 },
                { lat: 33.30920085146571, lng: -111.6731157900875 }
            ],
            [
                { lat: 33.30917619415382, lng: -111.6730668397726 },
                { lat: 33.30917619415382, lng: -111.6731157900875 }
            ],
            [
                { lat: 33.309151536834975, lng: -111.67306751032486 },
                { lat: 33.30915209722866, lng: -111.6731157900875 }
            ],
            [
                { lat: 33.309126879509165, lng: -111.67306751032486 },
                { lat: 33.309126879509165, lng: -111.67311646063975 }
            ],
            [
                { lat: 33.30910222217635, lng: -111.67306751032486 },
                { lat: 33.30910110138834, lng: -111.67311646063975 }
            ],
            [
                { lat: 33.30907700444243, lng: -111.67306952198163 },
                { lat: 33.30907756483659, lng: -111.67311646063975 }
            ],
            [
                { lat: 33.3090080759309, lng: -111.67306952198163 },
                { lat: 33.3090080759309, lng: -111.67311713119204 }
            ],
            [
                { lat: 33.30898397895709, lng: -111.67306885142943 },
                { lat: 33.308983418562335, lng: -111.67311780174434 }
            ],
            [
                { lat: 33.30895876118896, lng: -111.67306952198169 },
                { lat: 33.30895932158389, lng: -111.6731184722966 }
            ],
            [
                { lat: 33.3089094464213, lng: -111.67307019253394 },
                { lat: 33.3089094464213, lng: -111.67311914284886 }
            ],
            [
                { lat: 33.30888478902705, lng: -111.67307153363848 },
                { lat: 33.30888534942244, lng: -111.67311981340112 }
            ],
            [
                { lat: 33.30885901083465, lng: -111.67306885142943 },
                { lat: 33.308860131625764, lng: -111.67311914284886 }
            ],
            [
                { lat: 33.30893410380862, lng: -111.67307019253394 },
                { lat: 33.30893410380862, lng: -111.67311914284886 }
            ],
            [
                { lat: 33.3092240715978, lng: -111.67293806188708 },
                { lat: 33.309225192384226, lng: -111.67298500054521 }
            ],
            [
                { lat: 33.30919941429249, lng: -111.67293739133483 },
                { lat: 33.30919941429249, lng: -111.67298567109746 }
            ],
            [
                { lat: 33.30917419658665, lng: -111.67293806188708 },
                { lat: 33.30917475698019, lng: -111.67298567109746 }
            ],
            [
                { lat: 33.309148978873544, lng: -111.67293739133483 },
                { lat: 33.30914953926725, lng: -111.67298701220199 }
            ],
            [
                { lat: 33.30912488194085, lng: -111.67293873243933 },
                { lat: 33.30912488194085, lng: -111.67298567109746 }
            ],
            [
                { lat: 33.309100224607484, lng: -111.67293873243933 },
                { lat: 33.309100224607484, lng: -111.67298701220199 }
            ],
            [
                { lat: 33.309076688055505, lng: -111.67293873243933 },
                { lat: 33.30907724844967, lng: -111.67298500054521 }
            ],
            [
                { lat: 33.30900663875375, lng: -111.67294007354387 },
                { lat: 33.309007199148354, lng: -111.67298835330651 }
            ],
            [
                { lat: 33.30898198138694, lng: -111.67294007354387 },
                { lat: 33.30898310217648, lng: -111.67298768275425 }
            ],
            [
                { lat: 33.308957324013164, lng: -111.67293940299162 },
                { lat: 33.30895844480303, lng: -111.67298835330651 }
            ],
            [
                { lat: 33.308932666631044, lng: -111.67294141464836 },
                { lat: 33.308932666631044, lng: -111.67298902385876 }
            ],
            [
                { lat: 33.308908009243325, lng: -111.67294007354387 },
                { lat: 33.30890856963856, lng: -111.67299036496328 }
            ],
            [
                { lat: 33.30888447263946, lng: -111.67294074409612 },
                { lat: 33.308883351848635, lng: -111.67298969441102 }
            ],
            [
                { lat: 33.30885869444697, lng: -111.67294208520063 },
                { lat: 33.30885869444697, lng: -111.67298969441102 }
            ],
            [
                { lat: 33.30919896319936, lng: -111.67291894062309 },
                { lat: 33.30919952359274, lng: -111.6728793780398 }
            ],
            [
                { lat: 33.30917374549339, lng: -111.67291827007081 },
                { lat: 33.30917374549339, lng: -111.67287803693527 }
            ],
            [
                { lat: 33.309150208961256, lng: -111.67291961117535 },
                { lat: 33.30914908817386, lng: -111.67287870748754}
            ],
            [
                { lat: 33.3091249912412, lng: -111.6729202817276 },
                { lat: 33.30912443084733, lng: -111.67287602527851 }
            ],
            [
                { lat: 33.30909977351384, lng: -111.67291961117535 },
                { lat: 33.30909977351384, lng: -111.67287736638302 }
            ],
            [
                { lat: 33.30907567656756, lng: -111.67292229338439 },
                { lat: 33.30907623696173, lng: -111.67287736638302 }
            ],
            [
                { lat: 33.309006187659854, lng: -111.6729209522799 },
                { lat: 33.3090050668706, lng: -111.67287937803984 }
            ],
            [
                { lat: 33.30898153029292, lng: -111.67292162283216 },
                { lat: 33.30898153029292, lng: -111.67287803693532 }
            ],
            [
                { lat: 33.30895687291904, lng: -111.67292229338442 },
                { lat: 33.30895631252208, lng: -111.67287870748753 }
            ],
            [
                { lat: 33.30893333632635, lng: -111.67292028172758 },
                { lat: 33.308931655141045, lng: -111.67287803693527 }
            ],
            [
                { lat: 33.308907558148306, lng: -111.67292162283209 },
                { lat: 33.30890811854357, lng: -111.67287870748753 }
            ],
            [
                { lat: 33.30888290075349, lng: -111.67292229338435 },
                { lat: 33.30888177996266, lng: -111.67288004859203 }
            ],
            [
                { lat: 33.30885768295613, lng: -111.67292229338435 },
                { lat: 33.30885824335169, lng: -111.67288138969656 }
            ],
            [
                { lat: 33.30894553764396, lng: -111.67274617508234 },
                { lat: 33.30894553764396, lng: -111.6727923625719 }
            ],
            [
                { lat: 33.308920959857964, lng: -111.67274617508238 },
                { lat: 33.308921543118714, lng: -111.67279293522093 }
            ],
            [
                { lat: 33.308896623341546, lng: -111.67274547716983 },
                { lat: 33.308896462903625, lng: -111.67279433104596 }
            ],
            [
                { lat: 33.308872526337915, lng: -111.67274614772214 },
                { lat: 33.30887196594245, lng: -111.67279308638025 }
            ],
            [
                { lat: 33.30884674814191, lng: -111.67274681827439 },
                { lat: 33.30884730853755, lng: -111.67279375693252 }
            ],
            [
                { lat: 33.30877894024211, lng: -111.67274547716988 },
                { lat: 33.308778379846004, lng: -111.67279912135058 }
            ],
            [
                { lat: 33.30875316201842, lng: -111.67274748882664 },
                { lat: 33.30875316201633, lng: -111.67279643914156 }
            ],
            [
                { lat: 33.30872794418144, lng: -111.67274748882664 },
                { lat: 33.30872850457785, lng: -111.67279576858928 }
            ],
            [
                { lat: 33.30870384713239, lng: -111.67274748882664 },
                { lat: 33.30870384713239, lng: -111.67279643914156 }
            ],
            [
                { lat: 33.30867918967997, lng: -111.67274681827439 },
                { lat: 33.308679750076706, lng: -111.67279710969382 }
            ],
            [
                { lat: 33.308944350874604, lng: -111.67272652368287 },
                { lat: 33.30894500521193, lng: -111.67267954603075 }
            ],
            [
                { lat: 33.3089207947272, lng: -111.67272652368284 },
                { lat: 33.3089207947272, lng: -111.67267798010897 }
            ],
            [
                { lat: 33.30889592989854, lng: -111.67272808960458 },
                { lat: 33.308895275560836, lng: -111.67267798010897 }
            ],
            [
                { lat: 33.308871065062775, lng: -111.67272808960458 },
                { lat: 33.308871719400635, lng: -111.67267798010897 }
            ],
            [
                { lat: 33.30884554588186, lng: -111.67272808960458 },
                { lat: 33.30884685455798, lng: -111.67267954603071 }
            ],
            [
                { lat: 33.30877684035657, lng: -111.6727288725654 },
                { lat: 33.30877749469517, lng: -111.67268032899155 }
            ],
            [
                { lat: 33.308752629823864, lng: -111.67272965552627 },
                { lat: 33.308752629823864, lng: -111.67267954603068 }
            ],
            [
                { lat: 33.308727764947236, lng: -111.672731221448 },
                { lat: 33.30872907362511, lng: -111.67268111195241 }
            ],
            [
                { lat: 33.308702900063516, lng: -111.67272965552627 },
                { lat: 33.30870355440264, lng: -111.67268111195241 }
            ],
            [
                { lat: 33.30867803517269, lng: -111.67273043848714 },
                { lat: 33.30867868951202, lng: -111.67268111195241 }
            ],
            [
                { lat: 33.308653170274795, lng: -111.67273200440887 },
                { lat: 33.308653170274795, lng: -111.67268111195241 }
            ],
            [
                { lat: 33.30894389952795, lng: -111.67254863975113 },
                { lat: 33.3089447169964, lng: -111.67259559137332 }
            ],
            [
                { lat: 33.30891887283187, lng: -111.67254834898533 },
                { lat: 33.30891999362224, lng: -111.67259662874798 }
            ],
            [
                { lat: 33.30889477583562, lng: -111.67254834898533 },
                { lat: 33.30889533623109, lng: -111.67259729930039 }
            ],
            [
                { lat: 33.30887011843716, lng: -111.67254834898533 },
                { lat: 33.30886955804167, lng: -111.67259662874798 }
            ],
            [
                { lat: 33.30884490063612, lng: -111.67254834898533 },
                { lat: 33.30884490063612, lng: -111.6725979698525 }
            ],
            [
                { lat: 33.308820243223565, lng: -111.67254969008987 },
                { lat: 33.308820243223565, lng: -111.67259864040477 }
            ],
            [
                { lat: 33.308795025406916, lng: -111.67254969008992 },
                { lat: 33.308796146198866, lng: -111.67259796985256 }
            ],
            [
                { lat: 33.308770367980266, lng: -111.67254969008992 },
                { lat: 33.30877148877254, lng: -111.67259796985256 }
            ],
            [
                { lat: 33.30874627094295, lng: -111.67255036064216 },
                { lat: 33.308746831339256, lng: -111.67259260543449 }
            ],
            [
                { lat: 33.30894353021837, lng: -111.67253024407573 },
                { lat: 33.308942969823335, lng: -111.67248062320856 }
            ],
            [
                { lat: 33.30891887283373, lng: -111.672530914628 },
                { lat: 33.30891887283373, lng: -111.67248129376081 }
            ],
            [
                { lat: 33.30889365504675, lng: -111.672530914628 },
                { lat: 33.308895336232794, lng: -111.67248196431308 }
            ],
            [
                { lat: 33.30886955804353, lng: -111.67253024407573 },
                { lat: 33.30886899764801, lng: -111.67248196431308 }
            ],
            [
                { lat: 33.30884490063795, lng: -111.67253158518025 },
                { lat: 33.30884490063795, lng: -111.67248263486533 }
            ],
            [
                { lat: 33.30881968282787, lng: -111.67253040679392 },
                { lat: 33.30881968282787, lng: -111.6724823950407 }
            ],
            [
                { lat: 33.30879536493502, lng: -111.67253258914634 },
                { lat: 33.30879536493502, lng: -111.67248312249151 }
            ],
            [
                { lat: 33.308770439087795, lng: -111.67253258914634 },
                { lat: 33.308770439087795, lng: -111.67248312249151 }
            ],
            [
                { lat: 33.308745513233454, lng: -111.67253258914634 },
                { lat: 33.308745513233454, lng: -111.67248312249151 }
            ],
            [
                { lat: 33.30906037041141, lng: -111.67272553865992 },
                { lat: 33.30910296036592, lng: -111.67272553865992 }
            ],
            [
                { lat: 33.30910239997193, lng: -111.67269536380826 },
                { lat: 33.30905644765139, lng: -111.67269536380826 }
            ],
            [
                { lat: 33.30910296036592, lng: -111.67266585950885 },
                { lat: 33.30905644765139, lng: -111.67266585950885 }
            ],
            [
                { lat: 33.30910239997193, lng: -111.67263635520948 },
                { lat: 33.30905756843998, lng: -111.67263769631398 }
            ],
            [
                { lat: 33.30910239997193, lng: -111.67260618035782 },
                { lat: 33.30905644765139, lng: -111.67260685091007 }
            ],
            [
                { lat: 33.30910352075993, lng: -111.67257734661068 },
                { lat: 33.30905644765139, lng: -111.67257734661068 }
            ],
            [
                { lat: 33.30910239997193, lng: -111.67254784231127 },
                { lat: 33.30905476646848, lng: -111.67254784231127 }
            ],
            [
                { lat: 33.30910183957791, lng: -111.67251900856415 },
                { lat: 33.30905476646848, lng: -111.67251833801187 }
            ],
            [
                { lat: 33.30910183957791, lng: -111.67248883371249 },
                { lat: 33.30905420607416, lng: -111.67248950426475 }
            ],
            [
                { lat: 33.30910127918392, lng: -111.67245932941309 },
                { lat: 33.309055326862776, lng: -111.67245999996534 }
            ],
            [
                { lat: 33.30910239997193, lng: -111.67242982511368 },
                { lat: 33.30905420607416, lng: -111.67243049566594 }
            ],
            [
                { lat: 33.30930239647553, lng: -111.6727348939206 },
                { lat: 33.30930183608279, lng: -111.67278987920587 }
            ],
            [
                { lat: 33.30928894704921, lng: -111.67273623502514 },
                { lat: 33.30928894704921, lng: -111.67278920865361 }
            ],
            [
                { lat: 33.30926260858333, lng: -111.67273623502514 },
                { lat: 33.30926316897631, lng: -111.67278987920587 }
            ],
            [
                { lat: 33.30923851168205, lng: -111.67273891723418 },
                { lat: 33.30923851168205, lng: -111.67279054975812 }
            ],
            [
                { lat: 33.309214975167386, lng: -111.67273757612965 },
                { lat: 33.30921273359423, lng: -111.67278920865361 }
            ],
            [
                { lat: 33.3091891970726, lng: -111.6727382466819 },
                { lat: 33.30918863667917, lng: -111.67279122031037 }
            ],
            [
                { lat: 33.30916397936384, lng: -111.6727382466819 },
                { lat: 33.309165100151056, lng: -111.6727925614149 }
            ],
            [
                { lat: 33.309139882435296, lng: -111.67274092889095 },
                { lat: 33.30913876164775, lng: -111.67279189086263 }
            ],
            [
                { lat: 33.30911466471223, lng: -111.67273958778644 },
                { lat: 33.30911410431832, lng: -111.67279189086263 }
            ],
            [
                { lat: 33.30908944698192, lng: -111.6727382466819 },
                { lat: 33.30908888658783, lng: -111.67278786754909 }
            ],
            [
                { lat: 33.30870342621906, lng: -111.6729245939482 },
                { lat: 33.30874320156845, lng: -111.6729245939482 }
            ],
            [
                { lat: 33.3087011533414, lng: -111.67295451011188 },
                { lat: 33.3087477473215, lng: -111.67295519002468 }
            ],
            [
                { lat: 33.308702857999634, lng: -111.67298442627555 },
                { lat: 33.3087477473215, lng: -111.67298442627555 }
            ],
            [
                { lat: 33.30870399443846, lng: -111.67301434243923 },
                { lat: 33.30874888375971, lng: -111.67301366252643 }
            ],
            [
                { lat: 33.30870342621906, lng: -111.67304357869008 },
                { lat: 33.30874888375971, lng: -111.67304289877728 }
            ],
            [
                { lat: 33.30870399443846, lng: -111.67307349485377 },
                { lat: 33.30874888375971, lng: -111.67307281494095 }
            ],
            [
                { lat: 33.308750020197934, lng: -111.6731020511918 },
                { lat: 33.308702857999634, lng: -111.67310273110463 }
            ],
            [
                { lat: 33.30870342621906, lng: -111.67313196735549 },
                { lat: 33.308750020197934, lng: -111.67313128744269 }
            ],
            [
                { lat: 33.30870569909664, lng: -111.67321287697997 },
                { lat: 33.308750020197934, lng: -111.67321219706716 }
            ],
            [
                { lat: 33.308705130877264, lng: -111.67324279314364 },
                { lat: 33.308750020197934, lng: -111.67324143331803 }
            ],
            [
                { lat: 33.30870456265786, lng: -111.67327270930733 },
                { lat: 33.30875229307431, lng: -111.6732720293945 }
            ],
            [
                { lat: 33.30870456265786, lng: -111.67330194555818 },
                { lat: 33.308750020197934, lng: -111.67330126564538 }
            ],
            [
                { lat: 33.30870456265786, lng: -111.67333730102435 },
                { lat: 33.30875115663615, lng: -111.67333662111152 }
            ],
            [
                { lat: 33.30870569909664, lng: -111.67335293901898 },
                { lat: 33.30875229307431, lng: -111.67335225910618 }
            ],
            [
                { lat: 33.30870569909664, lng: -111.6733848949211 },
                { lat: 33.30875229307431, lng: -111.67338217526984 }
            ],
            [
                { lat: 33.30870569909664, lng: -111.67341277134634 },
                { lat: 33.30875229307431, lng: -111.67341209143352 }
            ],
            [
                { lat: 33.30870569909664, lng: -111.67342840934099 },
                { lat: 33.30875229307431, lng: -111.67342908925379 }
            ],
            [
                { lat: 33.30870456265786, lng: -111.67346512463276 },
                { lat: 33.30874604266413, lng: -111.67346444471995 }
            ],
            [
                { lat: 33.309313744900535, lng: -111.67351086250723 },
                { lat: 33.309313744900535, lng: -111.67345855943103 }
            ],
            [
                { lat: 33.30928796683496, lng: -111.6735115330595 },
                { lat: 33.30928852722778, lng: -111.67345855943103 }
            ],
            [
                { lat: 33.309264430333656, lng: -111.6735115330595 },
                { lat: 33.309264430333656, lng: -111.67345855943103 }
            ],
            [
                { lat: 33.30923977303976, lng: -111.6735115330595 },
                { lat: 33.30923977303976, lng: -111.67345855943103 }
            ],
            [
                { lat: 33.30914394576092, lng: -111.67350818029827 },
                { lat: 33.30914394576092, lng: -111.67346124164015 }
            ],
            [
                { lat: 33.30911928843294, lng: -111.67350818029827 },
                { lat: 33.30911928843294, lng: -111.6734605710879 }
            ],
            [
                { lat: 33.309093510309886, lng: -111.67351220361185 },
                { lat: 33.309093510309886, lng: -111.6734605710879 }
            ],
            [
                { lat: 33.3090699737561, lng: -111.6735095214028 },
                { lat: 33.3090699737561, lng: -111.67346124164015 }
            ],
            [
                { lat: 33.30904531640517, lng: -111.67351220361188 },
                { lat: 33.309045876799544, lng: -111.6734625827447 }
            ],
            [
                { lat: 33.3090206590493, lng: -111.67351421526865 },
                { lat: 33.30901953826026, lng: -111.67346325329696 }
            ],
            [
                { lat: 33.30899656208118, lng: -111.67351555637316 },
                { lat: 33.3089954412918, lng: -111.67346191219244 }
            ],
            [
                { lat: 33.30892483152873, lng: -111.67351086250731 },
                { lat: 33.30892539192389, lng: -111.67346392384918 }
            ],
            [
                { lat: 33.308900734534106, lng: -111.67351220361185 },
                { lat: 33.30890017413879, lng: -111.67346392384918 }
            ],
            [
                { lat: 33.308876077137356, lng: -111.67351220361185 },
                { lat: 33.30887495634645, lng: -111.67346392384918 }
            ],
            [
                { lat: 33.30885085933801, lng: -111.67351086250731 },
                { lat: 33.30885029894239, lng: -111.67346392384918 }
            ],
            [
                { lat: 33.30882676232296, lng: -111.6735162269254 },
                { lat: 33.30882676232296, lng: -111.67346258274468 }
            ],
            [
                { lat: 33.30880210490529, lng: -111.6735162269254 },
                { lat: 33.30880098411342, lng: -111.67346392384918 }
            ],
            [
                { lat: 33.308776326688445, lng: -111.6735162269254 },
                { lat: 33.30877688708455, lng: -111.6734652649537 }
            ],
            [
                { lat: 33.30933255379553, lng: -111.67273700847072 },
                { lat: 33.30908990349411, lng: -111.67273969067956 }
            ],
            [
                { lat: 33.30930117180842, lng: -111.67278998209568 },
                { lat: 33.309288843167565, lng: -111.67278998209568 }
            ],
            [
                { lat: 33.308751985199216, lng: -111.67341225456478 },
                { lat: 33.308751985199216, lng: -111.67342834781793 }
            ],
            [
                { lat: 33.308751985199216, lng: -111.67333648216454 },
                { lat: 33.308751985199216, lng: -111.6733525754177 }
            ],
            [
                { lat: 33.309383549505036, lng: -111.67318694902688 },
                { lat: 33.30934432204232, lng: -111.67318829013132 },
                { lat: 33.30934320125739, lng: -111.67316683246045 },
                { lat: 33.30938242872062, lng: -111.6731641502516 }        
            ],
            [
                { lat: 33.309190989882985, lng: -111.67350559987277 },
                { lat: 33.309190989882985, lng: -111.67346210227709 },
                { lat: 33.30917151571383, lng: -111.67346365576265 },
                { lat: 33.30917281399193, lng: -111.67350870684388 }        
            ],
            [
                { lat: 33.30896833495368, lng: -111.67351181381503 },
                { lat: 33.30896638753199, lng: -111.6734582185632 },
                { lat: 33.3089534047196, lng: -111.67345666507764 },
                { lat: 33.3089534047196, lng: -111.67351026032946 }        
            ],
            [
                { lat: 33.308706081770346, lng: -111.6731816981347 },
                { lat: 33.308746328596634, lng: -111.67317936790637 },
                { lat: 33.30874567945443, lng: -111.67316150282242 },
                { lat: 33.308706081770346, lng: -111.67316150282242 }
            ],
            [
                { lat: 33.30905280657656, lng: -111.6730749423671 },
                { lat: 33.30903599474521, lng: -111.67307226015805 },
                { lat: 33.30903543435078, lng: -111.67317820741496 },
                { lat: 33.3090544877595, lng: -111.6731795485195 },
                { lat: 33.30905280657656, lng: -111.67307427181483 }
            ],
            [
                { lat: 33.30905112539307, lng: -111.67287981166223 },
                { lat: 33.30903263237806, lng: -111.67287712945321 },
                { lat: 33.30903263237806, lng: -111.6729837472624 },
                { lat: 33.30904944421005, lng: -111.6729837472624 },
                { lat: 33.309053366970375, lng: -111.6728838349758 }
            ],
            [
                { lat: 33.30881975075154, lng: -111.67268448902563 },
                { lat: 33.308804620059284, lng: -111.67268314792078 },
                { lat: 33.30880405966323, lng: -111.6727897657564 },
                { lat: 33.30881975075154, lng: -111.67279043630882 },
                { lat: 33.30881975075154, lng: -111.6726865006829 }
            ],
            [
                { lat: 33.30903861591643, lng: -111.67337271027654 },
                { lat: 33.30905374656619, lng: -111.67337271027654 },
                { lat: 33.30905430696056, lng: -111.67327011576818 },
                { lat: 33.309038055521924, lng: -111.67326609245413 },
                { lat: 33.30903861591643, lng: -111.67337271027654 }
            ],
    
        ];

        for (const lineCoordinate of lineCoordinates) {
            const line = new window.google.maps.Polyline({
                path: lineCoordinate,
                geodesic: true,
                strokeColor: '#808080',
                strokeOpacity: 1.0,
                strokeWeight: 2
            });
    
            line.setMap(map);
        }

        // Start tracking user's location
        if (navigator.geolocation) {
            navigator.geolocation.watchPosition(
                (position) => {
                    const userLatLng = new window.google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                    map.setCenter(userLatLng);
                    calculateAndDisplayRoute(userLatLng, directions, renderer);
                },
                (error) => {
                    console.error('Error getting location:', error);
                },
                { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
            );
        } else {
            alert('Geolocation is not supported by your browser.');
        }
    };

    const calculateAndDisplayRoute = (userLatLng: any, directions: any, renderer: any) => {
        const searchParams = new URLSearchParams(window.location.search);
        directions.route({
            origin: userLatLng,
            destination: { lat: Number(searchParams.get("lat")), lng: Number(searchParams.get("long")) },
            travelMode: 'DRIVING'
        }, (response: any, status: any) => {
            if (status === 'OK') {
                renderer.setDirections(response);
                setLocationDetails(response.routes[0].legs[0]);
            } else {
                window.alert('Directions request failed due to ' + status);
            }
        });
    };

    return (
        <div>
            <Box id="google-map" style={useStyles.mapStyles}></Box>
        </div>
    );
};

export default ParkingLotMap;
